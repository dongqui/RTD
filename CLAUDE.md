# CLAUDE.md

이 파일은 Claude Code가 이 저장소에서 작업할 때 따라야 할 가이드라인을 제공합니다.

## 프로젝트 개요

**Random Defense (가제)** - HTML5 기반 랜덤 디펜스 게임 프로젝트

- **플랫폼**: HTML5 (토스 앱인토스 대상)
- **기술 스택**: Phaser 3 + TypeScript + Vite
- **목표**: 토스 HTML5 게임 챌린지 참여 및 수상

### 프로젝트 특징

- 중앙 코어 방어 방식의 원형 맵 디펜스 게임
- 웨이브 클리어 시 랜덤 보상 선택 시스템
- 15라운드 구성으로 점진적 난이도 상승
- 모바일 웹 최적화 (2-3초 이내 로딩 목표)

## 개발 명령어

- `npm install` - 의존성 설치
- `npm start` - 개발 서버 시작 (포트 8080)
- `npm run build` - 프로덕션 빌드

## 게임 구조

### 핵심 게임플레이

1. **웨이브 시작**: 외곽 6-8개 게이트에서 랜덤하게 적 스폰
2. **방어**: 타워와 환경 요소로 중앙 코어 방어
3. **보상 선택**: 웨이브 클리어 시 3장 카드 중 1개 선택
4. **빌드 성장**: 선택한 보상으로 전략 강화

### MVP 구성요소

- **타워 3종**: Arrow Tower, Cannon Tower, Frost Tower
- **파워업**: 3-5종의 능력 강화 아이템
- **환경 요소**: 벽, 함정 등 2종
- **코어 HP**: 기본 20 (적 도달 시 -1씩 감소)

## 아키텍처 & 코드 구조

### Scene 시스템 (Phaser 3)

- **Boot** (`src/main.ts`): 초기 로딩
- **Preload** (`src/scenes/Preload.ts`): 리소스 로딩 화면
- **Level** (`src/scenes/Level.ts`): 데모 씬 (제거 예정)
- **GameScene** (새로 구현 필요): 메인 게임 씬

### 게임 설정

- Canvas: 1280x720, FIT 스케일링
- Physics: Arcade Physics (중력 y: 98)
- 모바일 터치 UI 대응 (버튼 최소 44px)

### 에셋 관리

- `public/assets/preload-asset-pack.json` - 로딩 화면 에셋
- `public/assets/asset-pack.json` - 게임 메인 에셋
- Phaser Editor v4 에셋 팩 시스템 활용

## 개발 가이드라인

### 게임 개발 우선순위

1. **맵 시스템**: 원형 맵, 중앙 코어, 외곽 스폰 게이트 구현
2. **타워 시스템**: 기본 타워 3종 (Arrow/Cannon/Frost) 구현
3. **웨이브 시스템**: 15라운드 적 스폰 및 AI 패스파인딩
4. **보상 시스템**: 3장 카드 선택 UI 및 보상 적용 로직
5. **게임 상태 관리**: 코어 HP, 점수, 웨이브 진행 상태

### 코드 작성 규칙

- Phaser Editor 생성 코드는 `/* START OF COMPILED CODE */` 섹션에 위치
- 사용자 코드는 `/* START-USER-CODE */` 섹션에 작성
- TypeScript strict 모드 사용 (strictPropertyInitialization: false)
- 에셋 경로는 Phaser Editor Asset Pack 시스템 따름

### 모바일 최적화

- 터치 입력 최적화 (44px 이상 터치 영역)
- 저사양 기기 대응 (메모리 관리, 프레임레이트 유지)
- 2-3초 이내 초기 로딩 목표
- 토스 SDK 연동 준비 (세션 관리, 점수 전송)

### 빌드 & 배포

- Vite 기반 빌드 시스템
- 프로덕션: Terser 압축, 에셋 해싱 적용
- Phaser 라이브러리 별도 청크 분리

## 중요 구현 사항

### 필수 구현

- 원형 맵 중앙 코어 방어 시스템
- 외곽 다방향 적 스폰 및 패스파인딩
- 3종 타워의 고유 공격 방식 (화살/포탄/빙결)
- 웨이브 클리어 보상 선택 UI
- 게임 오버 및 재시작 시스템

### 향후 확장 고려

- 추가 맵 및 타워 타입
- 멀티플레이 협동 모드
- 더 다양한 보상풀 및 빌드 조합

## 개발 팁

- URL 파라미터 `?start=SceneName`으로 특정 씬 직접 테스트 가능
- 개발 서버 포트 8080에서 실시간 리로드 지원
- Microsoft Store 연령 등급 심사 및 토스 파트너십 고려하여 개발

## 주의사항

- 코드 작성 시 불필요한 주석 추가 금지
- 기존 파일 편집을 새 파일 생성보다 우선
- 문서 파일(.md) 또는 README는 명시적 요청 시에만 생성
